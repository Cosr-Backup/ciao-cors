# CIAO-CORS

é«˜æ€§èƒ½ã€åŠŸèƒ½å®Œæ•´çš„CORSä»£ç†æœåŠ¡ï¼Œæ”¯æŒå¤šç§éƒ¨ç½²æ–¹å¼å’Œä¸°å¯Œçš„é…ç½®é€‰é¡¹ã€‚ä¸“ä¸ºéœ€è¦è·¨åŸŸèµ„æºè®¿é—®çš„Webåº”ç”¨è®¾è®¡ï¼Œæä¾›äº†å®‰å…¨ã€å¯é çš„ä»£ç†è§£å†³æ–¹æ¡ˆã€‚

ğŸŒ **åœ¨çº¿æ¼”ç¤º**: [cors.ciao.su](https://cors.ciao.su)

æ„Ÿè°¢ **[DreamCloud](https://whmcs.as211392.com)** æä¾›çš„é«˜é˜²æœåŠ¡å™¨æ”¯æŒï¼Œä¸ºæœ¬é¡¹ç›®æä¾›ç¨³å®šå¯é çš„æ¼”ç¤ºç¯å¢ƒã€‚

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- ğŸš€ **é«˜æ€§èƒ½CORSä»£ç†**ï¼šæ”¯æŒæ‰€æœ‰HTTPæ–¹æ³•å’Œå†…å®¹ç±»å‹ï¼Œè½»æ¾è§£å†³è·¨åŸŸé—®é¢˜
- ğŸ”’ **å®‰å…¨é˜²æŠ¤**ï¼šIP/åŸŸåé»‘ç™½åå•ã€æ¶æ„URLæ£€æµ‹ã€è¯·æ±‚éªŒè¯
- âš¡ **æ™ºèƒ½é™æµ**ï¼šåŠ¨æ€è¯·æ±‚é¢‘ç‡é™åˆ¶å’Œå¹¶å‘æ§åˆ¶ï¼Œé˜²æ­¢èµ„æºæ»¥ç”¨
- ğŸ“Š **å®æ—¶ç›‘æ§**ï¼šè¯¦ç»†çš„è¯·æ±‚ç»Ÿè®¡ã€æ€§èƒ½åˆ†æå’ŒçŠ¶æ€ç›‘æ§
- ğŸ¯ **æ™ºèƒ½ç¼“å­˜**ï¼šGETè¯·æ±‚å“åº”ç¼“å­˜ï¼Œå¤§å¹…æå‡æ€§èƒ½å’Œå‡å°‘å¤–éƒ¨è¯·æ±‚
- ğŸ“ **å®Œæ•´æ—¥å¿—**ï¼šæ”¯æŒæ§åˆ¶å°å’ŒWebhookæ—¥å¿—ï¼Œä¾¿äºè¿½è¸ªå’Œåˆ†æ
- ğŸ¤– **æ™ºèƒ½ä¼ªè£…**ï¼šä¼˜å…ˆè½¬å‘çœŸå®User-Agentï¼Œè‡ªåŠ¨æ·»åŠ æµè§ˆå™¨æ ‡å‡†å¤´éƒ¨ï¼Œé™ä½è¢«è¯†åˆ«ä¸ºçˆ¬è™«çš„é£é™©
- ğŸ”„ **è‡ªåŠ¨é‡è¯•**ï¼šæ™ºèƒ½é‡è¯•æœºåˆ¶ï¼Œè‡ªåŠ¨å¤„ç†ç½‘ç»œæ³¢åŠ¨å’Œä¸´æ—¶é”™è¯¯ï¼Œå¤§å¹…æå‡è¯·æ±‚æˆåŠŸç‡

### é…ç½®é€‰é¡¹
- **é»‘ç™½åå•**ï¼šæ”¯æŒIPå’ŒåŸŸåçº§åˆ«çš„è®¿é—®æ§åˆ¶ï¼Œç²¾ç¡®ç®¡ç†ä»£ç†æƒé™
- **é¢‘ç‡é™åˆ¶**ï¼šå¯é…ç½®çš„æ»‘åŠ¨çª—å£è¯·æ±‚é™åˆ¶ï¼Œè‡ªåŠ¨é˜²å¾¡æ¶æ„æµé‡
- **å¹¶å‘æ§åˆ¶**ï¼šå•IPå’Œå…¨å±€å¹¶å‘æ•°é™åˆ¶ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®š
- **ç»Ÿè®¡ç›‘æ§**ï¼šå¯é€‰çš„è¯·æ±‚ç»Ÿè®¡å’Œæ€§èƒ½ç›‘æ§ï¼Œå®æ—¶äº†è§£ç³»ç»ŸçŠ¶æ€
- **APIç®¡ç†**ï¼šå†…ç½®ç®¡ç†APIï¼Œæ”¯æŒAPIå¯†é’¥ä¿æŠ¤ï¼Œå®‰å…¨ç®¡ç†ç³»ç»Ÿ

### éƒ¨ç½²æ–¹å¼
- **Deno Deploy**ï¼šä¸€é”®éƒ¨ç½²åˆ°å…¨çƒCDNç½‘ç»œï¼Œæé€Ÿå“åº”å…¨çƒè¯·æ±‚
- **VPSéƒ¨ç½²**ï¼šå®Œæ•´çš„ä¸€é”®å®‰è£…å’Œç®¡ç†è„šæœ¬ï¼Œè½»æ¾ç®¡ç†è‡ªå·±çš„å®ä¾‹
- **Dockerå®¹å™¨**ï¼šæ”¯æŒå®¹å™¨åŒ–éƒ¨ç½²ï¼Œå¿«é€Ÿé›†æˆåˆ°ç°æœ‰åŸºç¡€è®¾æ–½

## å¿«é€Ÿå¼€å§‹

### Deno Deployéƒ¨ç½²

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone https://github.com/bestZwei/ciao-cors.git
   cd ciao-cors
   ```

2. **åˆ›å»ºDeno Deployé¡¹ç›®**
   - è®¿é—® [Deno Deploy](https://dash.deno.com)
   - åˆ›å»ºæ–°é¡¹ç›®
   - é€‰æ‹©"ä»GitHubéƒ¨ç½²"ï¼Œé€‰æ‹©æ‚¨çš„ä»“åº“å’Œserver.tsæ–‡ä»¶

3. **é…ç½®ç¯å¢ƒå˜é‡**
   - åœ¨Deno Deployæ§åˆ¶å°ä¸­è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰
   - å¯ä»¥é…ç½®API_KEYã€é™æµå‚æ•°ã€åŸŸåé»‘ç™½åå•ç­‰

4. **å¼€å§‹ä½¿ç”¨**
   - é€šè¿‡ `https://your-project.deno.dev/example.com/api/endpoint` æ ¼å¼è®¿é—®
   - ç¬¬ä¸€ä¸ªè·¯å¾„æ®µæ˜¯æ‚¨è¦è¯·æ±‚çš„ç›®æ ‡åŸŸåå’Œè·¯å¾„

### VPSéƒ¨ç½²

1. **ä¸‹è½½éƒ¨ç½²è„šæœ¬**
   ```bash
   curl -fsSL https://raw.githubusercontent.com/bestZwei/ciao-cors/main/deploy.sh -o deploy.sh
   chmod +x deploy.sh
   ```

2. **è¿è¡Œå®‰è£…è„šæœ¬**
   ```bash
   sudo ./deploy.sh
   ```

3. **æŒ‰ç…§èœå•æç¤ºæ“ä½œ**
   - è‡ªåŠ¨æ£€æµ‹å’Œå®‰è£…Deno
   - é…ç½®æœåŠ¡å‚æ•°ï¼ˆç«¯å£ã€APIå¯†é’¥ç­‰ï¼‰
   - è®¾ç½®é˜²ç«å¢™è§„åˆ™
   - åˆ›å»ºç³»ç»ŸæœåŠ¡

#### è„šæœ¬åŠŸèƒ½ç‰¹æ€§

- **ğŸ”’ å®‰å…¨æ€§**: è„šæœ¬é”å®šæœºåˆ¶é˜²æ­¢å¹¶å‘æ‰§è¡Œï¼Œå®Œæ•´çš„æƒé™æ£€æŸ¥
- **ğŸŒ å…¼å®¹æ€§**: æ”¯æŒUbuntuã€Debianã€CentOSã€RHELã€Fedoraç­‰ä¸»æµå‘è¡Œç‰ˆ
- **ğŸ”§ æ™ºèƒ½å®‰è£…**: è‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿæ¶æ„ï¼Œæ”¯æŒx86_64å’ŒARM64
- **ğŸ“¦ ä¾èµ–ç®¡ç†**: è‡ªåŠ¨å®‰è£…å¿…è¦ä¾èµ–ï¼Œæ™ºèƒ½åŒ…ç®¡ç†å™¨æ£€æµ‹
- **ğŸ›¡ï¸ é˜²ç«å¢™**: æ”¯æŒfirewalldã€ufwã€iptableså¤šç§é˜²ç«å¢™
- **ğŸ“‹ å¤‡ä»½æ¢å¤**: è‡ªåŠ¨å¤‡ä»½é…ç½®å’Œæ–‡ä»¶ï¼Œæ”¯æŒä¸€é”®æ¢å¤
- **ğŸ”„ æ›´æ–°ç»´æŠ¤**: å†…ç½®è„šæœ¬æ›´æ–°ã€æœåŠ¡æ›´æ–°ã€ç³»ç»Ÿä¼˜åŒ–åŠŸèƒ½
- **ğŸ“Š ç›‘æ§è¯Šæ–­**: å¥åº·æ£€æŸ¥ã€æ€§èƒ½ç›‘æ§ã€æ—¥å¿—åˆ†æ
- **ğŸ¯ ç”¨æˆ·å‹å¥½**: å½©è‰²è¾“å‡ºã€è¯¦ç»†æç¤ºã€é”™è¯¯å¤„ç†

## é«˜çº§é…ç½®

### ç¯å¢ƒå˜é‡

| å˜é‡å | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|--------|------|
| `PORT` | `3000` | æœåŠ¡ç›‘å¬ç«¯å£ |
| `RATE_LIMIT` | `2500` | æ¯ä¸ªæ—¶é—´çª—å£çš„æœ€å¤§è¯·æ±‚æ•° |
| `RATE_LIMIT_WINDOW` | `60000` | é™æµæ—¶é—´çª—å£ï¼ˆæ¯«ç§’ï¼‰ |
| `CONCURRENT_LIMIT` | `10` | å•IPæœ€å¤§å¹¶å‘æ•° |
| `TOTAL_CONCURRENT_LIMIT` | `1000` | å…¨å±€æœ€å¤§å¹¶å‘æ•° |
| `MAX_URL_LENGTH` | `2048` | æœ€å¤§URLé•¿åº¦ |
| `MAX_BODY_SIZE` | `10485760` | æœ€å¤§è¯·æ±‚ä½“å¤§å°ï¼ˆå­—èŠ‚ï¼Œé»˜è®¤10MBï¼‰ |
| `TIMEOUT` | `30000` | è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ |
| `ENABLE_STATS` | `false` | æ˜¯å¦å¯ç”¨ç»Ÿè®¡åŠŸèƒ½ |
| `ENABLE_LOGGING` | `true` | æ˜¯å¦å¯ç”¨æ—¥å¿—è®°å½• |
| `API_KEY` | - | ç®¡ç†APIå¯†é’¥ï¼ˆå¯é€‰ï¼‰ |
| `LOG_WEBHOOK` | - | æ—¥å¿—Webhook URLï¼ˆå¯é€‰ï¼‰ |
| `ALLOWED_ORIGINS` | - | å…è®¸çš„æ¥æºåŸŸååˆ—è¡¨ï¼ˆJSONæˆ–é€—å·åˆ†éš”ï¼‰ |
| `BLOCKED_IPS` | - | ç¦æ­¢çš„IPåœ°å€åˆ—è¡¨ï¼ˆJSONæˆ–é€—å·åˆ†éš”ï¼‰ |
| `BLOCKED_DOMAINS` | - | ç¦æ­¢çš„åŸŸååˆ—è¡¨ï¼ˆJSONæˆ–é€—å·åˆ†éš”ï¼‰ |
| `ALLOWED_DOMAINS` | - | å…è®¸çš„åŸŸååˆ—è¡¨ï¼ˆJSONæˆ–é€—å·åˆ†éš”ï¼‰ |
| `REQUIRE_HEADERS` | `true` | æ˜¯å¦å¼ºåˆ¶è¦æ±‚Originæˆ–X-Requested-Withå¤´éƒ¨ |

### é…ç½®ç¤ºä¾‹

**åŸºç¡€é…ç½®**
```bash
export PORT=3000
export RATE_LIMIT=100
export ENABLE_STATS=true
export API_KEY=your-secret-key
```

**å®‰å…¨é…ç½®**
```bash
export BLOCKED_IPS='["192.168.1.100", "10.0.0.5"]'
export ALLOWED_DOMAINS='["api.example.com", "data.example.org"]'
export BLOCKED_DOMAINS='["malicious.com", "spam.net"]'
export REQUIRE_HEADERS=true  # å¼ºåˆ¶è¦æ±‚Originæˆ–X-Requested-Withå¤´éƒ¨
```

**æ€§èƒ½é…ç½®**
```bash
export CONCURRENT_LIMIT=20
export TOTAL_CONCURRENT_LIMIT=2000
export TIMEOUT=60000
export RATE_LIMIT_WINDOW=30000
```

## APIå‚è€ƒ

### ä»£ç†ä½¿ç”¨

**åŸºæœ¬ä»£ç†æ ¼å¼**
```
https://your-domain.com/{target-url}
```

**ä½¿ç”¨ç¤ºä¾‹**
```bash
# ä»£ç†GETè¯·æ±‚ï¼ˆéœ€è¦æ·»åŠ å¿…éœ€çš„å¤´éƒ¨ï¼‰
curl -H "X-Requested-With: XMLHttpRequest" \
  https://your-domain.com/httpbin.org/get

# ä»£ç†POSTè¯·æ±‚
curl -X POST https://your-domain.com/jsonplaceholder.typicode.com/posts \
  -H "Content-Type: application/json" \
  -H "X-Requested-With: XMLHttpRequest" \
  -d '{"title": "test", "body": "content"}'

# ä½¿ç”¨Originå¤´éƒ¨ï¼ˆæµè§ˆå™¨fetchä¼šè‡ªåŠ¨æ·»åŠ ï¼‰
curl -H "Origin: https://your-app.com" \
  "https://your-domain.com/api.github.com/users/octocat"
```

**JavaScript fetchç¤ºä¾‹**
```javascript
// fetchä¼šè‡ªåŠ¨æ·»åŠ Originå¤´éƒ¨ï¼Œæ— éœ€æ‰‹åŠ¨è®¾ç½®
fetch('https://your-domain.com/httpbin.org/get')
  .then(response => response.json())
  .then(data => console.log(data));

// æˆ–è€…æ‰‹åŠ¨æ·»åŠ X-Requested-Withå¤´éƒ¨
fetch('https://your-domain.com/httpbin.org/get', {
  headers: {
    'X-Requested-With': 'XMLHttpRequest'
  }
})
  .then(response => response.json())
  .then(data => console.log(data));
```

### ç®¡ç†API

éœ€è¦è®¾ç½®`API_KEY`ç¯å¢ƒå˜é‡æ‰èƒ½è®¿é—®ç®¡ç†APIã€‚

**å¥åº·æ£€æŸ¥**
```bash
GET /_api/health?key=your-api-key
```

**æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯**
```bash
GET /_api/stats?key=your-api-key
```

**æŸ¥çœ‹æ€§èƒ½æ•°æ®**
```bash
GET /_api/performance?key=your-api-key
```

**æŸ¥çœ‹é…ç½®ä¿¡æ¯**
```bash
GET /_api/config?key=your-api-key
```

**æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯**
```bash
GET /_api/version?key=your-api-key
```

**é‡ç½®ç»Ÿè®¡æ•°æ®**
```bash
GET /_api/reset-stats?key=your-api-key
```

**æ¸…ç†ç¼“å­˜**
```bash
GET /_api/clear-cache?key=your-api-key
```

**çƒ­é‡è½½é…ç½®**
```bash
GET /_api/reload-config?key=your-api-key
```

**ä½¿ç”¨Bearer Token**
```bash
curl -H "Authorization: Bearer your-api-key" \
  https://your-domain.com/_api/stats
```

## å®‰å…¨æœ€ä½³å®è·µ

### ğŸ” åŸºç¡€å®‰å…¨é…ç½®

1. **å¼ºåˆ¶è®¾ç½®APIå¯†é’¥**
   - ä½¿ç”¨è‡³å°‘32ä½çš„å¤æ‚éšæœºå¯†é’¥
   - åŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦
   - å®šæœŸè½®æ¢APIå¯†é’¥ï¼ˆå»ºè®®æ¯3-6ä¸ªæœˆï¼‰
   - ç¤ºä¾‹ç”Ÿæˆå¼ºå¯†é’¥ï¼š`openssl rand -base64 32`

2. **é…ç½®ä¸¥æ ¼çš„è®¿é—®æ§åˆ¶**
   - ä½¿ç”¨åŸŸåç™½åå•é™åˆ¶å¯ä»£ç†çš„ç›®æ ‡
   - é…ç½®IPé»‘åå•é˜»æ­¢æ¶æ„æ¥æº
   - è®¾ç½®æ¥æºç™½åå•æ§åˆ¶CORSè®¿é—®
   - é¿å…ä½¿ç”¨é€šé…ç¬¦ï¼ˆ*ï¼‰é™¤éå¿…è¦

3. **å®æ–½å¤šå±‚é™æµä¿æŠ¤**
   - è¯·æ±‚é¢‘ç‡é™åˆ¶ï¼šé˜²æ­¢å•IPè¿‡åº¦è¯·æ±‚
   - å¹¶å‘è¿æ¥é™åˆ¶ï¼šé˜²æ­¢èµ„æºè€—å°½
   - è¯·æ±‚ä½“å¤§å°é™åˆ¶ï¼šé˜²æ­¢å¤§æ–‡ä»¶æ”»å‡»
   - æ ¹æ®æœåŠ¡å™¨æ€§èƒ½è°ƒæ•´å‚æ•°

### ğŸ›¡ï¸ ç³»ç»Ÿå®‰å…¨åŠ å›º

4. **æœåŠ¡è¿è¡Œå®‰å…¨**
   - ä½¿ç”¨ä¸“ç”¨éç‰¹æƒç”¨æˆ·è¿è¡ŒæœåŠ¡
   - å¯ç”¨systemdå®‰å…¨ç‰¹æ€§ï¼ˆå·²å†…ç½®ï¼‰
   - é…ç½®é€‚å½“çš„æ–‡ä»¶æƒé™ï¼ˆ600ç”¨äºé…ç½®æ–‡ä»¶ï¼‰
   - å®šæœŸæ£€æŸ¥æœåŠ¡è¿è¡ŒçŠ¶æ€

5. **ç½‘ç»œå®‰å…¨é…ç½®**
   - é…ç½®é˜²ç«å¢™åªå¼€æ”¾å¿…è¦ç«¯å£
   - ä½¿ç”¨HTTPSåå‘ä»£ç†ï¼ˆæ¨ènginx/Apacheï¼‰
   - è€ƒè™‘ä½¿ç”¨VPNæˆ–å†…ç½‘éƒ¨ç½²
   - ç›‘æ§å¼‚å¸¸ç½‘ç»œè¿æ¥

6. **æ—¥å¿—å’Œç›‘æ§**
   - å¯ç”¨è¯¦ç»†æ—¥å¿—è®°å½•
   - é…ç½®æ—¥å¿—è½®è½¬é˜²æ­¢ç£ç›˜æ»¡
   - è®¾ç½®å¼‚å¸¸å‘Šè­¦ï¼ˆå¯ç”¨Webhookï¼‰
   - å®šæœŸåˆ†æè®¿é—®æ¨¡å¼

### ğŸ”„ ç»´æŠ¤å’Œæ›´æ–°

7. **å®šæœŸå®‰å…¨ç»´æŠ¤**
   - åŠæ—¶æ›´æ–°ç³»ç»Ÿå’ŒDenoè¿è¡Œæ—¶
   - ä½¿ç”¨ç®¡ç†è„šæœ¬æ£€æŸ¥æœåŠ¡çŠ¶æ€
   - å®šæœŸå¤‡ä»½é…ç½®æ–‡ä»¶
   - è¿è¡Œå®‰å…¨æ£€æŸ¥è„šæœ¬

8. **å®‰å…¨æ£€æŸ¥å·¥å…·**
   ```bash
   # è¿è¡Œå®‰å…¨é…ç½®æ£€æŸ¥
   curl -fsSL https://raw.githubusercontent.com/bestZwei/ciao-cors/main/security-check.sh | sudo bash

   # æˆ–ä¸‹è½½åè¿è¡Œ
   wget https://raw.githubusercontent.com/bestZwei/ciao-cors/main/security-check.sh
   chmod +x security-check.sh
   sudo ./security-check.sh
   ```

### âš ï¸ å®‰å…¨è­¦å‘Š

- **æ°¸è¿œä¸è¦**åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç¦ç”¨æ‰€æœ‰å®‰å…¨é™åˆ¶
- **æ°¸è¿œä¸è¦**ä½¿ç”¨å¼±å¯†ç æˆ–é»˜è®¤å¯†é’¥
- **æ°¸è¿œä¸è¦**å…è®¸ä»£ç†è®¿é—®å†…ç½‘åœ°å€ï¼ˆå·²å†…ç½®ä¿æŠ¤ï¼‰
- **æ°¸è¿œä¸è¦**å¿½ç•¥å¼‚å¸¸çš„æµé‡æ¨¡å¼
- **å®šæœŸæ£€æŸ¥**æ˜¯å¦æœ‰æœªæˆæƒçš„é…ç½®æ›´æ”¹

## æ€§èƒ½ä¼˜åŒ–

### æ¨èé…ç½®
- **å°å‹ç«™ç‚¹**ï¼šå¹¶å‘é™åˆ¶10ï¼Œé¢‘ç‡é™åˆ¶60/åˆ†é’Ÿ
- **ä¸­å‹ç«™ç‚¹**ï¼šå¹¶å‘é™åˆ¶50ï¼Œé¢‘ç‡é™åˆ¶300/åˆ†é’Ÿ
- **å¤§å‹ç«™ç‚¹**ï¼šå¹¶å‘é™åˆ¶100ï¼Œé¢‘ç‡é™åˆ¶1000/åˆ†é’Ÿ

### ä¼˜åŒ–æŠ€å·§
1. **å¢åŠ ç¼“å­˜æ—¶é—´**
   - å¯¹äºä¸ç»å¸¸å˜åŒ–çš„å†…å®¹ï¼Œå¯ä»¥å»¶é•¿ç¼“å­˜TTL
   - æ·»åŠ è‡ªå®šä¹‰ç¼“å­˜æ§åˆ¶å¤´

2. **è°ƒæ•´å¹¶å‘é™åˆ¶**
   - å¯¹äºå¼ºCPUæœåŠ¡å™¨ï¼Œå¯ä»¥å¢åŠ å¹¶å‘é™åˆ¶
   - ç›‘æ§ç³»ç»Ÿè´Ÿè½½ï¼Œé¿å…è¿‡è½½

3. **ä½¿ç”¨VPSéƒ¨ç½²è„šæœ¬çš„ç³»ç»Ÿä¼˜åŒ–åŠŸèƒ½**
   - ä¼˜åŒ–ç³»ç»Ÿé™åˆ¶ï¼ˆæ–‡ä»¶æè¿°ç¬¦ã€è¿æ¥æ•°ï¼‰
   - è°ƒæ•´ç½‘ç»œå‚æ•°æé«˜ååé‡
   - æ·»åŠ SWAPç©ºé—´ï¼ˆä½å†…å­˜æœåŠ¡å™¨ï¼‰

### ç›‘æ§æŒ‡æ ‡
- å¹³å‡å“åº”æ—¶é—´ï¼ˆç›®æ ‡ï¼š<500msï¼‰
- é”™è¯¯ç‡ï¼ˆç›®æ ‡ï¼š<1%ï¼‰
- å¹¶å‘è¿æ¥æ•°
- ç¼“å­˜å‘½ä¸­ç‡ï¼ˆç›®æ ‡ï¼š>70%ï¼‰

## æ•…éšœæ’é™¤

### éƒ¨ç½²è„šæœ¬é—®é¢˜

**Q: è„šæœ¬æç¤º"ç½‘ç»œè¿æ¥å¤±è´¥"**
```bash
# æ£€æŸ¥ç½‘ç»œè¿æ¥
ping github.com
ping deno.land

# æ£€æŸ¥DNSè®¾ç½®
cat /etc/resolv.conf

# ä¸´æ—¶ä½¿ç”¨å…¶ä»–DNS
echo "nameserver 8.8.8.8" > /etc/resolv.conf
```

**Q: å¥åº·æ£€æŸ¥æ˜¾ç¤º"ç«¯å£æœªç›‘å¬"ä½†æœåŠ¡åœ¨è¿è¡Œ**
```bash
# å®‰è£…ç½‘ç»œå·¥å…·
sudo apt install net-tools iproute2 lsof  # Ubuntu/Debian
sudo yum install net-tools iproute lsof   # CentOS/RHEL

# æ‰‹åŠ¨æ£€æŸ¥ç«¯å£
sudo ss -tuln | grep :3000
sudo netstat -tuln | grep :3000
sudo lsof -i :3000

# æ£€æŸ¥æœåŠ¡æ—¥å¿—
sudo journalctl -u ciao-cors -f
```

**Q: æ€§èƒ½ç›‘æ§æ˜¾ç¤º"netstat: command not found"**
```bash
# ç°ä»£Linuxç³»ç»Ÿæ¨èä½¿ç”¨sså‘½ä»¤
sudo apt install iproute2  # Ubuntu/Debian
sudo yum install iproute   # CentOS/RHEL

# æˆ–å®‰è£…ä¼ ç»Ÿçš„net-tools
sudo apt install net-tools  # Ubuntu/Debian
sudo yum install net-tools  # CentOS/RHEL
```

**Q: Denoå®‰è£…å¤±è´¥**
```bash
# æ‰‹åŠ¨å®‰è£…Deno
curl -fsSL https://deno.land/x/install/install.sh | sh
export PATH="$HOME/.deno/bin:$PATH"
sudo ln -sf $HOME/.deno/bin/deno /usr/local/bin/deno

# éªŒè¯å®‰è£…
deno --version
```

**Q: é˜²ç«å¢™é…ç½®å¤±è´¥**
```bash
# æ£€æŸ¥é˜²ç«å¢™çŠ¶æ€
sudo systemctl status firewalld
sudo systemctl status ufw

# æ‰‹åŠ¨å¼€æ”¾ç«¯å£
sudo firewall-cmd --permanent --add-port=3000/tcp
sudo firewall-cmd --reload

# æˆ–ä½¿ç”¨ufw
sudo ufw allow 3000/tcp
```

**Q: æœåŠ¡åˆ›å»ºå¤±è´¥**
```bash
# æ£€æŸ¥systemd
sudo systemctl --version

# æ‰‹åŠ¨é‡è½½systemd
sudo systemctl daemon-reload

# æ£€æŸ¥æœåŠ¡æ–‡ä»¶
sudo systemctl cat ciao-cors
```

### æœåŠ¡è¿è¡Œé—®é¢˜

**Q: æœåŠ¡å¯åŠ¨å¤±è´¥ï¼Œæç¤ºç«¯å£è¢«å ç”¨**
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
sudo netstat -tlnp | grep :3000
sudo lsof -i :3000

# æˆ–ä½¿ç”¨å…¶ä»–ç«¯å£
sudo ./deploy.sh  # é€‰æ‹©ä¿®æ”¹é…ç½® -> ç«¯å£å·
```

**Q: è¯·æ±‚è¢«æ‹’ç»ï¼Œæç¤ºRate limit exceeded**
```bash
# è°ƒæ•´é™æµé…ç½®
export RATE_LIMIT=200
export RATE_LIMIT_WINDOW=60000
```

**Q: ä»£ç†è¯·æ±‚è¶…æ—¶**
```bash
# å¢åŠ è¶…æ—¶æ—¶é—´
export TIMEOUT=60000
```

**Q: ç»Ÿè®¡æ•°æ®ä¸æ˜¾ç¤º**
```bash
# æ£€æŸ¥ç»Ÿè®¡åŠŸèƒ½æ˜¯å¦å¯ç”¨
curl http://localhost:3000/_api/config?key=your-api-key

# å¯ç”¨ç»Ÿè®¡åŠŸèƒ½
export ENABLE_STATS=true

# æˆ–ä¿®æ”¹é…ç½®æ–‡ä»¶
sudo sed -i 's/^ENABLE_STATS=.*/ENABLE_STATS=true/' /etc/ciao-cors/config.env
sudo systemctl restart ciao-cors

# æµ‹è¯•ç»Ÿè®¡åŠŸèƒ½
curl https://raw.githubusercontent.com/bestZwei/ciao-cors/main/test-stats.sh | bash
```

**Q: å®¢æˆ·ç«¯æ”¶åˆ°CORSé”™è¯¯**
```bash
# æ£€æŸ¥å…è®¸çš„æ¥æºè®¾ç½®
export ALLOWED_ORIGINS='["*"]'
# æˆ–è€…æŒ‡å®šç‰¹å®šåŸŸå
export ALLOWED_ORIGINS='["https://your-app.com"]'
```

**Q: æ”¶åˆ°"Missing required request header"é”™è¯¯**
```bash
# è¿™æ˜¯æ–°çš„å®‰å…¨åŠŸèƒ½ï¼Œéœ€è¦æ·»åŠ å¿…éœ€çš„å¤´éƒ¨
# æ–¹æ³•1ï¼šåœ¨è¯·æ±‚ä¸­æ·»åŠ X-Requested-Withå¤´éƒ¨
curl -H "X-Requested-With: XMLHttpRequest" https://your-domain.com/target-url

# æ–¹æ³•2ï¼šåœ¨è¯·æ±‚ä¸­æ·»åŠ Originå¤´éƒ¨
curl -H "Origin: https://your-app.com" https://your-domain.com/target-url

# æ–¹æ³•3ï¼šå¦‚æœéœ€è¦ç¦ç”¨æ­¤åŠŸèƒ½ï¼ˆä¸æ¨èï¼‰
export REQUIRE_HEADERS=false
sudo systemctl restart ciao-cors
```

### å¿«é€Ÿè¯Šæ–­

**ä½¿ç”¨è¯Šæ–­è„šæœ¬**
```bash
# ä¸‹è½½è¯Šæ–­è„šæœ¬
curl -fsSL https://raw.githubusercontent.com/bestZwei/ciao-cors/main/diagnose.sh -o diagnose.sh
chmod +x diagnose.sh

# è¿è¡Œè¯Šæ–­
sudo ./diagnose.sh
```

è¯Šæ–­è„šæœ¬ä¼šè‡ªåŠ¨æ£€æŸ¥ï¼š
- ç³»ç»ŸçŠ¶æ€å’Œèµ„æº
- æœåŠ¡è¿è¡ŒçŠ¶æ€
- é…ç½®æ–‡ä»¶æœ‰æ•ˆæ€§
- ç½‘ç»œè¿æ¥å’Œç«¯å£ç›‘å¬
- é”™è¯¯æ—¥å¿—åˆ†æ
- æä¾›è‡ªåŠ¨ä¿®å¤å»ºè®®

### è°ƒè¯•æŠ€å·§

**æŸ¥çœ‹å®æ—¶æ—¥å¿—**
```bash
# systemdæœåŠ¡æ—¥å¿—
sudo journalctl -f -u ciao-cors

# æˆ–è€…ç›´æ¥è¿è¡Œ
deno run --allow-net --allow-env server.ts
```

**APIè°ƒè¯•**
```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:3000/_api/health

# æµ‹è¯•ä»£ç†
curl http://localhost:3000/httpbin.org/ip

# æ€§èƒ½æ•°æ®
curl -H "Authorization: Bearer your-api-key" \
  http://localhost:3000/_api/performance
```

## æŠ€æœ¯æ¶æ„

CIAO-CORS é‡‡ç”¨ç°ä»£åŒ–çš„æ¶æ„è®¾è®¡ï¼Œç¡®ä¿é«˜æ€§èƒ½å’Œå¯é æ€§ï¼š

- **è¿è¡Œæ—¶ç¯å¢ƒ**ï¼šä½¿ç”¨Denoè¿è¡Œæ—¶ï¼Œè·å¾—åŸç”ŸTypeScriptæ”¯æŒå’Œå®‰å…¨æ²™ç®±
- **æ— ä¾èµ–è®¾è®¡**ï¼šä¸ä¾èµ–å¤–éƒ¨npmåŒ…ï¼Œå‡å°‘å®‰å…¨é£é™©å’Œéƒ¨ç½²å¤æ‚æ€§
- **å†…å­˜ä¼˜åŒ–**ï¼šæ™ºèƒ½ç¼“å­˜ç®¡ç†å’Œèµ„æºæ¸…ç†ï¼Œé¿å…å†…å­˜æ³„æ¼
- **å¹¶å‘æ§åˆ¶**ï¼šå¤šçº§é™æµç­–ç•¥ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šæ€§
- **å®‰å…¨å¢å¼º**ï¼šå…¨é¢çš„è¯·æ±‚éªŒè¯å’Œè¿‡æ»¤ï¼Œé˜²æ­¢æ¶æ„è¯·æ±‚

## è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

1. Forkæœ¬é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯Pull Request

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å®‰è£…Deno
curl -fsSL https://deno.land/x/install/install.sh | sh

# æœ¬åœ°è¿è¡Œ
deno run --allow-net --allow-env server.ts

# ç±»å‹æ£€æŸ¥
deno check server.ts

# ä»£ç æ ¼å¼åŒ–
deno fmt server.ts

# ä»£ç lint
deno lint server.ts
```

## æ”¯æŒ

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªâ­ï¸ï¼

### è”ç³»æ–¹å¼

- GitHub Issues: [https://github.com/bestZwei/ciao-cors/issues](https://github.com/bestZwei/ciao-cors/issues)
- Email: [post@zwei.de.eu.org](mailto:post@zwei.de.eu.org)

---

Made with â¤ï¸ by [bestZwei](https://github.com/bestZwei)